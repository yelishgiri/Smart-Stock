<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="SmartStock.Project.Views.DashBoardPage"
             BackgroundColor="#f9f9f9">

    <ContentPage.Resources>
        <ResourceDictionary>
            <Style TargetType="Label">
                <Setter Property="TextColor" Value="#222"/>
                <Setter Property="FontSize" Value="18"/>
            </Style>
            <Style TargetType="Border">
                <Setter Property="Stroke" Value="#ccc" />
                <Setter Property="StrokeThickness" Value="1.5"/>
                <Setter Property="StrokeShape" Value="RoundRectangle 8"/>
                <Setter Property="Padding" Value="10"/>
                <Setter Property="Margin" Value="10,5"/>
            </Style>
            <Style TargetType="Entry">
                <Setter Property="BackgroundColor" Value="White"/>
                <Setter Property="PlaceholderColor" Value="#999"/>
                <Setter Property="TextColor" Value="#333"/>
            </Style>
            <Style x:Key="PageButton" TargetType="Button">
                <Setter Property="BackgroundColor" Value="#ffffff"/>
                <Setter Property="Padding" Value="12"/>
                <Setter Property="Margin" Value="10, 10, 10, 0"/>
                <Setter Property="BorderColor" Value="#007AFF"/>
                <Setter Property="TextColor" Value="#007AFF"/>
                <Setter Property="BorderWidth" Value="1.5"/>
                <Setter Property="CornerRadius" Value="6"/>
            </Style>
        </ResourceDictionary>
    </ContentPage.Resources>

    <Grid ColumnDefinitions="15*, 2, 85*" RowDefinitions="*" VerticalOptions="Fill">

        <VerticalStackLayout Grid.Column="0" BackgroundColor="#ffffff" Padding="0,40">
            <Label FontSize="28" FontAttributes="Bold" HorizontalOptions="Center">Smart Stock</Label>
            <BoxView Color="#007AFF" HeightRequest="3" HorizontalOptions="Fill" Margin="0,10" />
            <Button Text="Dashboard" Style="{StaticResource PageButton}" x:Name="DashBoardbtn" />
            <Button Text="Products" Style="{StaticResource PageButton}" x:Name="Productstbtn" Clicked="Productstbtn_Clicked" />
            <Button Text="Documents" Style="{StaticResource PageButton}" />
            <Button Text="Log Out" Style="{StaticResource PageButton}" x:Name="LogOutbtn" Clicked="LogOutbtn_Clicked" />
        </VerticalStackLayout>

        <BoxView Grid.Column="1" Color="#007AFF" WidthRequest="2" VerticalOptions="Fill" />

        <ScrollView Grid.Column="2">
            <VerticalStackLayout Padding="20" Spacing="20">
                <HorizontalStackLayout HorizontalOptions="End" Spacing="15">
                    <Button Text="Storage Alerts" BackgroundColor="#FF3B30" TextColor="White" />
                    <VerticalStackLayout>
                        <Label x:Name="UsernameLabel" FontSize="24" FontAttributes="Bold" />
                        <Label x:Name="CompanyLabel" FontSize="16" TextColor="#555" />
                        <Label Text="Admin" FontSize="14" TextColor="#888" FontAttributes="Italic" />
                    </VerticalStackLayout>
                    <!-- TODO: Replace with user profile image -->
                </HorizontalStackLayout>

                <FlexLayout JustifyContent="SpaceBetween" Padding="0">
                    <Label Text="Dashboard" FontSize="28" FontAttributes="Bold" />
                    <Border>
                        <Entry Placeholder="Search Products..." WidthRequest="300" HorizontalTextAlignment="Start" />
                    </Border>
                </FlexLayout>

                <Grid ColumnDefinitions="40*, 60*" RowDefinitions="60*, 40*" ColumnSpacing="20" RowSpacing="20">
                    <Border Grid.Column="0" Grid.Row="0">
                        <VerticalStackLayout>
                            <Label Text="Analytics" FontSize="20" FontAttributes="Bold" />
                            <Label Text="Total Products:" />
                            <Label x:Name="TotalProductsLabel" FontSize="16" Margin="5,0" />
                            <Label Text="Total Quantity:" />
                            <Label x:Name="TotalQuantityLabel" FontSize="16" Margin="5,0" />
                            <Label Text="Total Value:" />
                            <Label x:Name="TotalValueLabel" FontSize="16" Margin="5,0" />
                        </VerticalStackLayout>
                    </Border>

                    <Border Grid.Column="1" Grid.Row="0">
                        <VerticalStackLayout>
                            <Label Text="Stock Info" FontSize="20" FontAttributes="Bold" />
                            <CollectionView x:Name="ProductListView">
                                <CollectionView.ItemTemplate>
                                    <DataTemplate>
                                        <Frame BorderColor="#ccc" CornerRadius="8" Padding="10" Margin="0,5">
                                            <VerticalStackLayout>
                                                <Label Text="{Binding Name}" FontAttributes="Bold" />
                                                <Label Text="Category: {Binding Category}" />
                                                <Label Text="Qty: {Binding Quantity} | Price: ${Binding Price}" />
                                            </VerticalStackLayout>
                                        </Frame>
                                    </DataTemplate>
                                </CollectionView.ItemTemplate>
                            </CollectionView>
                        </VerticalStackLayout>
                    </Border>

                    <Border Grid.Row="1" Grid.ColumnSpan="2">
            <VerticalStackLayout>
    <Label Text="Newly Added" FontSize="20" FontAttributes="Bold" />
<CollectionView x:Name="NewlyAddedList">
  <CollectionView.ItemTemplate>
    <DataTemplate>
      <Frame BorderColor="#ddd" Padding="10" Margin="5" CornerRadius="10">
        <HorizontalStackLayout Spacing="10">
          <!-- TODO: Add product image here -->
          <Frame WidthRequest="60" HeightRequest="60" CornerRadius="8" BackgroundColor="#eee" VerticalOptions="Center" HorizontalOptions="Start">
            <Label Text="IMG" HorizontalOptions="Center" VerticalOptions="Center" TextColor="#999" />
          </Frame>
          <VerticalStackLayout>
            <Label Text="{Binding Name}" FontSize="16" FontAttributes="Bold" />

            <Label>
              <Label.FormattedText>
                <FormattedString>
                  <Span Text="Category: " />
                  <Span Text="{Binding Category}" />
                </FormattedString>
              </Label.FormattedText>
            </Label>

            <Label>
              <Label.FormattedText>
                <FormattedString>
                  <Span Text="Added Qty: " />
                  <Span Text="{Binding Quantity}" />
                </FormattedString>
              </Label.FormattedText>
            </Label>

            <Label>
              <Label.FormattedText>
                <FormattedString>
                  <Span Text="Barcode: " />
                  <Span Text="{Binding Barcode}" />
                </FormattedString>
              </Label.FormattedText>
            </Label>

          </VerticalStackLayout>
        </HorizontalStackLayout>
      </Frame>
    </DataTemplate>
  </CollectionView.ItemTemplate>
</CollectionView>

  </VerticalStackLayout>
</Border>
                </Grid>
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>